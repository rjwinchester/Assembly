program tZStrs;
#include( "stdlib.hhf" )

static
	z1		:zstring := "z1";
	z2		:zstring := "z2";

	z3		:zstring := &zbuf1;
	zbuf1	:char[256];
	
	hStr	:str.strvar(256);

begin tZStrs;

	zstr.cpy( z1, z3 );
	zstr.cat( z2, z3 );
	str.cpyz( z3, hStr );
	if( str.ne( hStr, "z1z2" )) then
	
		stderr.put( "zcat failed! (1)" nl );
		stderr.put( "z3   = '", z3, "'" nl );
		stderr.put( "hStr = '", hStr, "'" nl );
		stdout.put( "Press Enter to Continue: " );
		stdin.readLn();
		os.exitProcess(1);
		
	endif;

	zstr.cpy( z1, z3 );
	zstr.cat( "", z3 );
	str.cpyz( z3, hStr );
	if( str.ne( hStr, "z1" )) then
	
		stderr.put( "zcat failed! (2)" nl );
		stderr.put( "z3   = '", z3, "'" nl );
		stderr.put( "hStr = '", hStr, "'" nl );
		stdout.put( "Press Enter to Continue: " );
		stdin.readLn();
		os.exitProcess(1);
		
	endif;

	zstr.cpy( "", z3 );
	zstr.cat( "", z3 );
	str.cpyz( z3, hStr );
	if( str.ne( hStr, "" )) then
	
		stderr.put( "zcat failed! (3)" nl );
		stderr.put( "z3   = '", z3, "'" nl );
		stderr.put( "hStr = '", hStr, "'" nl );
		stdout.put( "Press Enter to Continue: " );
		stdin.readLn();
		os.exitProcess(1);
		
	endif;

	zstr.cpy( "", z3 );
	zstr.cat( "Hello World", z3 );
	str.cpyz( z3, hStr );
	if( str.ne( hStr, "Hello World" )) then
	
		stderr.put( "zcat failed! (4)" nl );
		stderr.put( "z3   = '", z3, "'" nl );
		stderr.put( "hStr = '", hStr, "'" nl );
		stdout.put( "Press Enter to Continue: " );
		stdin.readLn();
		os.exitProcess(1);
		
	endif;
	stderr.put( "zcat/zcpy test succeeded!" nl );
	
	
	
	
	// Testing zstr.cmp:
	
	zstr.cpy( z1, z3 );
	zstr.cat( z2, z3 );
	if( zstr.zcmp( z3, "z1z2" ) <> 0 ) then
	
		stderr.put( "zcmp failed! (1)" nl );
		stderr.put( "z3   = '", z3, "'" nl );
		stdout.put( "Press Enter to Continue: " );
		stdin.readLn();
		os.exitProcess(1);
		
	endif;

	zstr.cpy( z1, z3 );
	zstr.cat( "", z3 );
	if( zstr.zcmp( z3, "z1" ) <> 0 ) then
	
		stderr.put( "zcmp failed! (2)" nl );
		stderr.put( "z3   = '", z3, "'" nl );
		stdout.put( "Press Enter to Continue: " );
		stdin.readLn();
		os.exitProcess(1);
		
	endif;

	zstr.cpy( "", z3 );
	zstr.cat( "", z3 );
	if( zstr.zcmp( z3, "" ) <> 0 ) then
	
		stderr.put( "zcmp failed! (3)" nl );
		stderr.put( "z3   = '", z3, "'" nl );
		stdout.put( "Press Enter to Continue: " );
		stdin.readLn();
		os.exitProcess(1);
		
	endif;

	zstr.cpy( "", z3 );
	zstr.cat( "Hello World", z3 );
	if( zstr.zcmp( z3, "Hello World" ) <> 0) then
	
		stderr.put( "zcmp failed! (4)" nl );
		stderr.put( "z3   = '", z3, "'" nl );
		stdout.put( "Press Enter to Continue: " );
		stdin.readLn();
		os.exitProcess(1);
		
	endif;
	stderr.put( "zcat test succeeded!" nl );
	
	
	
	
	// Testing zstr.len
	
	zstr.len( "" );
	if( eax <> 0 ) then
	
		stderr.put( "zlen failed! Expected 0, got ", eax, " (0)" nl );
		stdout.put( "Press Enter to Continue: " );
		stdin.readLn();
		os.exitProcess(1);
		
	endif;
	
	zstr.len( "1" );
	if( eax <> 1 ) then
	
		stderr.put( "zlen failed! Expected 1, got ", eax, " (1)" nl );
		stdout.put( "Press Enter to Continue: " );
		stdin.readLn();
		os.exitProcess(1);
		
	endif;
	
	zstr.len( "22" );
	if( eax <> 2 ) then
	
		stderr.put( "zlen failed! Expected 2, got ", eax, " (2)" nl );
		stdout.put( "Press Enter to Continue: " );
		stdin.readLn();
		os.exitProcess(1);
		
	endif;
	
	zstr.len( "333" );
	if( eax <> 3 ) then
	
		stderr.put( "zlen failed! Expected 3, got ", eax, " (3)" nl );
		stdout.put( "Press Enter to Continue: " );
		stdin.readLn();
		os.exitProcess(1);
		
	endif;
	
	zstr.len( "4444" );
	if( eax <> 4 ) then
	
		stderr.put( "zlen failed! Expected 4, got ", eax, " (4)" nl );
		stdout.put( "Press Enter to Continue: " );
		stdin.readLn();
		os.exitProcess(1);
		
	endif;
	
	zstr.len( "55555" );
	if( eax <> 5 ) then
	
		stderr.put( "zlen failed! Expected 5, got ", eax, " (5)" nl );
		stdout.put( "Press Enter to Continue: " );
		stdin.readLn();
		os.exitProcess(1);
		
	endif;
	
	zstr.len( "666666" );
	if( eax <> 6 ) then
	
		stderr.put( "zlen failed! Expected 6, got ", eax, " (6)" nl );
		stdout.put( "Press Enter to Continue: " );
		stdin.readLn();
		os.exitProcess(1);
		
	endif;
	
	zstr.len( "7777777" );
	if( eax <> 7 ) then
	
		stderr.put( "zlen failed! Expected 7, got ", eax, " (7)" nl );
		stdout.put( "Press Enter to Continue: " );
		stdin.readLn();
		os.exitProcess(1);
		
	endif;
	
	zstr.len( "88888888" );
	if( eax <> 8 ) then
	
		stderr.put( "zlen failed! Expected 8, got ", eax, " (8)" nl );
		stdout.put( "Press Enter to Continue: " );
		stdin.readLn();
		os.exitProcess(1);
		
	endif;
	
	zstr.len( "999999999" );
	if( eax <> 9 ) then
	
		stderr.put( "zlen failed! Expected 9, got ", eax, " (9)" nl );
		stdout.put( "Press Enter to Continue: " );
		stdin.readLn();
		os.exitProcess(1);
		
	endif;
	stderr.put( "zlen test succeeded!" nl );
	
	
	
	stderr.put( "tZStrs test suite succeeded!" nl );
	
end tZStrs;