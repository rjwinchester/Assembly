// Test program for the console functions.
//
// This is a manual test that must be run by hand because we cannot
// really automate the console test in a portable manner.

program tConsole;
#include( "stdlib.hhf" )

	procedure getKey;
	begin getKey;
	
		console.gotoxy( 0,23 );
		stdout.put( "Press Enter to Continue: " );
		stdin.readLn();
		console.clrLn();
		
	end getKey;
	
begin tConsole;


	console.cls();
	stdout.put( nl nl "Testing Console functions" nl );
	stdout.put( "Should have cleared the screen before displaying these lines" );
	getKey();
	
	console.gotoxy( 0, 0 );
	stdout.put( "Should clear to EOLN:1234567890abcdefghijklmnoopqrstuvwxyz" nl );
	getKey();
	console.gotoxy( 21, 0 );
	console.clrToEOLN();
	getKey();
	console.gotoxy( 20, 0 );
	stdout.put( "<<<Should clear to BOLN" );
	getKey();
	console.gotoxy( 20, 0 );
	console.clrToBOLN();
	getKey();
	
	console.cls();
	stdout.put( "Testing gotoxy/gotorc: " );
	for( mov( 1, ecx ); ecx < 20; inc( ecx )) do
	
		console.gotoxy( ecx, ecx );
		stdout.put( "*" );
		mov( 80, eax );
		sub( ecx, eax );
		console.gotorc( ecx, eax );
		stdout.put( "*" );
		
	endfor;
	getKey();
	console.cls();
			
	console.gotorc( 3, 0 );
	stdout.put
	( 
		"This is line 3" nl
		"This is line 4" nl
		"This is line 5" nl
		"This is line 6" nl
		"This is line 7" nl
		"This is line 8" nl
		"This is line 9" nl
		"This is line 10" nl
		"This is line 11" nl
		"This is line 12" nl
		"This is line 13" nl
		"This is line 14" nl
		"This is line 15" nl
		"This is line 16" nl
		"This is line 17" nl
		"This is line 18" nl
		"This is line 19" nl
		"This is line 20" nl
	);
	console.gotorc( 10, 20 );
	stdout.put( "Testing clrToEOScrn:" );
	console.saveCursor();
	getKey();
	console.restoreCursor(); 
	console.clrToEOScrn();
	console.saveCursor();
	stdout.put( "<<<Testing clrToBOScrn" );
	getKey();
	console.restoreCursor();
	console.clrToBOScrn();
	getKey();
	
	console.cls();
	stdout.put( "Testing up, down, left, right: " );
	console.gotorc( 12, 40 );
	stdout.put( "*" );
	console.up();
	console.left();
	stdout.put( "*" );
	console.up();
	console.left();
	stdout.put( "***" );
	console.down();
	console.left();
	stdout.put( "*" );
	console.down();
	console.left();
	stdout.put( "*" );
	console.gotorc( 12,40 );
	console.right();
	stdout.put( "**" );
	getKey();
	
	console.cls();
	stdout.put( "Testing nup, ndown, nleft, nright: " );
	console.gotorc( 12, 40 );
	stdout.put( "*" );
	console.nup(2);
	console.nleft(1);
	stdout.put( "***" );
	console.ndown(2);
	console.nleft(1);
	stdout.put( "*" );
	console.nleft( 3 );
	console.ndown(2);
	stdout.put( "..." );
	console.nright(3);
	stdout.put( "***" );
	getKey();
	

	console.gotoxy( 0, 0 );
	console.clrLn();
	stdout.put( "Testing scrollDn" );
	getKey();
		
	console.scrollDn();
	getKey();
	
	console.gotoxy( 0, 0 );
	console.clrLn();
	stdout.put( "Testing scrollUp" );
	getKey();
	console.scrollUp();
	getKey();

	console.cls();
	stdout.put( "Testing setAttrs (red+green)" );
	console.setAttrs( console.green, console.red );
	console.gotorc( 5, 10 );
	stdout.put( "Red and green" );
	stdout.put( nl "switching to yellow+blue to clear screen" );
	getKey();
	
	console.setAttrs( console.yellow, console.blue );
	console.cls();
	
	console.gotorc( 0, 0 );
	stdout.put( "testing deleteChar: " );
	
	console.gotorc( 5, 10 );
	stdout.put( "Chars to delete" );
	getKey();
	console.gotorc( 5, 10 );
	console.deleteChar();
	getKey();
	
	console.gotorc( 0, 0 );
	console.clrLn();
	stdout.put( "Testing deleteChars (6 chars to delete)" );
	
	getKey();
	console.gotorc( 5, 10 );
	console.deleteChars( 6 );
	getKey();
	
	console.gotorc( 0, 0 );
	console.clrLn();
	stdout.put( "Testing deleteLine" );
	getKey();
	console.gotorc( 5, 10 );
	console.deleteLine();
	getKey();
	
	console.cls();
	
	console.gotorc( 8, 0 );
	stdout.put
	(
		"line 1" nl
		"line 2" nl
		"line 3" nl
		"line 4" nl
		"line 5" nl
		"line 6" nl
		"line 7" nl
		"line 8" nl
		"line 9" nl
		"line 10" nl
	);
	console.gotorc( 0, 0 );
	stdout.put( "testing deleteLines (6 lines)" );
	getKey();
	
	console.gotorc( 8, 0 );		
	console.deleteLines( 6 );
	getKey();
	

	console.cls();
	stdout.put( "Testing insertChar and insertChars" );
	
	console.gotorc( 5, 0 );
	stdout.put( "Hello world" );
	console.nleft( 6 );
	console.saveCursor();
	getKey();
	console.restoreCursor();
	console.insertChar();
	console.insertChars( 5 );
	stdout.put( " there" );
	console.saveCursor();
	getKey();
	
	console.gotorc( 0, 0 );
	console.clrLn();
	stdout.put( "Testing insertLine and insertLines (three lines)" );
	getKey();
	
	console.restoreCursor();
	console.insertLine();
	console.insertLines( 2 );
	getKey();
	
	console.gotorc( 0, 0 );
	console.clrLn();
	stdout.put( "testing saveCursor and restoreCursor" );
	
	console.gotorc( 10, 0 );
	console.saveCursor();
	stdout.put( "Cursor saved at beginning of line" nl nl );
	console.restoreCursor();
	stdout.put( "Should overwrite" nl );
	getKey();
	
	console.setAttrs( console.white, console.black );
	console.cls();
	stdout.put( "tConsole successful!" nl );
	
		

end tConsole;