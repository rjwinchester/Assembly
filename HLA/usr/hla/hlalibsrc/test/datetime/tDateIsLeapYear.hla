program isLeapYear_test;
#include( "stdlib.hhf" )

static
	year		:word;	
		
	
begin isLeapYear_test;

	mov( date.minYear, year );
	while( year <= date.maxYear-1 ) do
	
		xor( ecx, ecx );		// Assume it's not a leap year
		movzx( year, eax );
		test( %11, eax );
		if( @z ) then
		
			inc( ecx );			// Assume it is a leap year.
			
			// Divisible by four, also by 100?
			
			xor( edx, edx );
			div( 100, edx:eax );
			test( edx, edx );
			if( @z ) then
			
				dec( ecx );	// Assume it's not a leap year
				
				// Divisible by 100, also by 400?
				
				test( %11, eax );
				if( @z ) then
				
					inc( ecx ); // It is a leap year
					
				endif;
				
			endif;
			
		endif;
		date.isLeapYear( year );
		
		if( eax <> ecx ) then
		
			stderr.put
			( 
				nl nl 
				"***************************************************" nl
				"date.isLeapYear failed!", nl,
				"year =  ", (type uns16 year ), nl,
				"ecx=", (type boolean cl), nl,
				"eax=", (type boolean al), nl,
				"***************************************************" nl
			);
			stdout.put( "Press Enter to Continue: " );
			stdin.readLn();
			os.exitProcess(1);
			
		endif;
		inc( year );	
		
	endwhile;
	stderr.put( "date.isLeapYear succeeded!" nl );
	os.exitProcess(0);
		
end isLeapYear_test;

													