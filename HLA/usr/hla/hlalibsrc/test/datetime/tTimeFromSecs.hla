program secstohms_test;
#include( "stdlib.hhf" )

static
	incTime		:time.timerec;
	resultTime	:time.timerec;
	
	seconds		:dword;
	endSeconds	:dword;
	days		:dword;		
	
begin secstohms_test;


	mov( 0, seconds );
	mov( 0, days );
	mov( 4*60*60*24, endSeconds );
	mov( 0, incTime );
		 
	while( mov( endSeconds, eax ) > seconds ) do
	
		time.fromSecs( seconds, resultTime );
		if
		( 
				mov( resultTime, ebx ) <> (type dword incTime)
			||	eax <> days 
		) then
		
			stderr.put
			( 
				nl nl 
				"***************************************************" nl
				"time.FromSecs failed!", nl,
				"seconds   = ", seconds, nl
				"hmsToSecs = ", ebx, nl,
				"days      = ", days, nl,
				"eax       = ", eax, nl,
				"***************************************************" nl
				nl 
			);
			stdout.put( "Press Enter to Continue: " );
			stdin.readLn();
			os.exitProcess(1);
			
		endif;
		inc( seconds );
		inc( incTime.secs );
		if( incTime.secs >= 60 ) then
		
			add( 256-60, incTime );	// subtracts 60 secs, adds 1 min
			if( incTime.mins >= 60 ) then
			
				add( (256-60)*256, incTime ); // subs 60 mins, adds 1 hour
				if( incTime.hours >= 24 ) then 
				
					mov( 0, incTime.hours );
					inc( days );
					
				endif;
				
			endif;
			
		endif;
		
	endwhile;
	stderr.put( "time.FromSecs succeeded!" nl );
	os.exitProcess(0);
		
end secstohms_test;

													