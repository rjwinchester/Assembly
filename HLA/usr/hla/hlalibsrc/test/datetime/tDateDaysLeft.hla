program DaysLeft_test;
#include( "stdlib.hhf" )

static
	baseDate	:date.daterec;
	incDate		:date.daterec;
	FiveYears	:date.daterec;
	endDate		:date.daterec;
	
	days		:dword;
	days5		:dword;
		
	
begin DaysLeft_test;

	 
	date.setFormat( date.mmddyyyy );
	
	date.pack( 1, 1, date.minYear, incDate );
	mov( incDate, eax );
	mov( eax, baseDate );
	
	date.pack( 1, 1, date.maxYear-1, endDate );
	
	mov( 0, days );
	while( mov( endDate, eax ) >= (type dword baseDate) ) do
	
		mov( baseDate, eax );
		mov( eax, incDate );
		mov( 364, ebx );
		movzx( incDate.year, eax );
		date.isLeapYear( eax );
		add( eax, ebx );
		while( ebx > 0 ) do
		
		
			date.daysLeft( incDate );		
			if( eax <> ebx ) then
			
				stderr.put
				( 
					nl nl 
					"***************************************************" nl
					"date.daysLeft failed!", nl,
					"daysLeft =  ", (type uns32 eax ), nl,
					"days     =  ", (type uns32 ebx ), nl,
					"date =    '"
				);
				date.a_toString( incDate );
				stderr.put
				(
					(type string eax), "'" nl
					"***************************************************" nl
					nl 
				);
				stdout.put( "Press Enter to Continue: " );
				stdin.readLn();
				os.exitProcess(1);
				
			endif;
			dec( ebx );
			date.addDays( 1, incDate );
			
		endwhile;
		inc( baseDate.year );
		
	endwhile;
	stderr.put( "date.daysLeft succeeded!" nl );
	os.exitProcess(0);
		
end DaysLeft_test;

													