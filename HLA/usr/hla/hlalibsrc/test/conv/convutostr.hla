program convutostr_test;
#include( "stdlib.hhf" )


static
	bufstr		:string;
	buf			:str.strvar(256);
	
	#macro bufTest( function, theValue, strValue, exceptionValue );
	

		@text( "conv." + @string( function )) ( theValue, 0, ' ', buf );
		if( str.ne( buf, strValue ) ) then

			printCmp( @string( function ), strValue, buf );
			raise( exceptionValue );

		endif;

	
		@text( "conv.a_" + @string( function )) ( theValue, 0, ' ' );
		mov( eax, bufstr );
		if( str.ne( bufstr, strValue ) ) then

			printCmp( @string( function ), strValue, bufstr );
			raise( exceptionValue );

		endif;
		str.free( bufstr );

	#endmacro
	
	
	procedure printCmp( function:string; strValue:string; was:string );
	begin printCmp;
	
		stderr.put( function, " failed!" nl);
		stderr.put( "Should be '", strValue, "'" nl );
		stderr.put( "     was: '", was, "'" nl );
	
	end printCmp;
	
	
	
	#macro strTest( function, theValue, strValue, exceptionValue, size, chr ):_s_;

		?_s_ := @string( function );	
		for( mov( 0, ecx); ecx <= size; inc( ecx )) do
		
			@text( "conv." + _s_) ( theValue, ecx, chr, buf );
			if( str.ne( buf, strValue[ecx*4] ) ) then

				stderr.put
				( 
					"conv." + _s_ + " failed on inputs (", 
					(type uns32 ecx), 
					"): " nl
					"Produced:  """, buf, """, and " nl
					"Should be: """, strValue[ecx*4], """" nl
				);
				raise( exceptionValue );

			endif;
			
		
			@text( "conv.a_" + _s_) ( theValue, ecx, chr );
			mov( eax, bufstr );
			if( str.ne( bufstr, strValue[ecx*4] ) ) then

				stderr.put
				( 
					"conv.a_" + _s_ + " failed on inputs (", 
					(type uns32 ecx), 
					"): " nl
					"Produced:  """, bufstr, """, and " nl
					"Should be: """, strValue[ecx*4], """" nl
				);
				raise( exceptionValue );

			endif;
			str.free( bufstr );
			
		endfor

	#endmacro
	
	#macro strTest2( function, theValue, strValue, exceptionValue, size, chr ):_s_;

		?_s_ := @string( function );
		mov( 0, ecx );
		while( (type int32 ecx) >= -size ) do
		
			mov( ecx, edx );
			neg( edx );
			@text( "conv." + _s_) ( theValue, ecx, chr, buf );

			if( str.ne( buf, strValue[edx*4] ) ) then

				stderr.put
				( 
					"conv." + _s_ + " failed on inputs (", 
					(type uns32 edx), 
					"): " nl
					"Produced:  """, buf, """" nl
					"Should be: """, strValue[edx*4], """" nl
				);
				raise( exceptionValue );

			endif;
		
			mov( ecx, edx );
			neg( edx );
			@text( "conv.a_" + _s_) ( theValue, ecx, chr );
			mov( eax, bufstr );
			if( str.ne( bufstr, strValue[edx*4] ) ) then

				stderr.put
				( 
					"conv." + _s_ + " failed on inputs (", 
					(type uns32 edx), 
					"): " nl
					"Produced:  """, bufstr, """" nl
					"Should be: """, strValue[edx*4], """" nl
				);
				raise( exceptionValue );

			endif;
			str.free( bufstr );
			dec( ecx );
			
		endwhile

	#endmacro
	
	#macro mkStr( s, fill, size );
	
		(@strset( fill, @max( 0, size-@length(s))) +s)
		
	#endmacro
	
	#macro mkStr2( s, fill, size );
	
		(s+@strset( fill, @max( 0, size-@length(s))))
		
	#endmacro
	
	
begin convutostr_test;

	// Testing conv.i8ToBuf

	try

		bufTest( u8ToStr,             0,           "0", $00080);
		bufTest( u8ToStr,             1,           "1", $00081);
		bufTest( u8ToStr,             2,           "2", $00082);
		bufTest( u8ToStr,             3,           "3", $00083);
		bufTest( u8ToStr,             4,           "4", $00084);
		bufTest( u8ToStr,             5,           "5", $00085);
		bufTest( u8ToStr,             6,           "6", $00086);
		bufTest( u8ToStr,             7,           "7", $00087);
		bufTest( u8ToStr,             8,           "8", $00088);
		bufTest( u8ToStr,             9,           "9", $00089);
		bufTest( u8ToStr,            10,          "10", $01081);
		bufTest( u8ToStr,            20,          "20", $01082);
		bufTest( u8ToStr,            30,          "30", $01083);
		bufTest( u8ToStr,            40,          "40", $01084);
		bufTest( u8ToStr,            50,          "50", $01085);
		bufTest( u8ToStr,            60,          "60", $01086);
		bufTest( u8ToStr,            70,          "70", $01087);
		bufTest( u8ToStr,            80,          "80", $01088);
		bufTest( u8ToStr,            90,          "90", $01089);
		bufTest( u8ToStr,           100,         "100", $02081);
		
		readonly
			u8Test_a	:string[64] :=
						[
							#for( i := 0 to 62 )
							
								mkStr( "0", ' ', i ),
								
							#endfor
							mkStr( "0", ' ', 63 )
						];
						
			u8Test_b	:string[64] :=
						[
							#for( i := 0 to 62 )
							
								mkStr2( "127", '.', i ),
								
							#endfor
							mkStr2( "127", '.', 63 )
						];
						
		endreadonly;
		strTest( u8ToStr, 0, u8Test_a, $F0A0, 63, ' ' );
		strTest2( u8ToStr, 127, u8Test_b, $F0A1, 63, '.' );				
	
		
		stderr.put( "conv.u8ToStr succeeded!" nl );
		
	  anyexception
	  
		stderr.put
		( 
			nl nl 
			"***************************************************" nl
			"conv.u8ToStr failed! eax=", eax, nl
			"***************************************************" nl
			nl 
		);
		stdout.put( "Press Enter to Continue: " );
		stdin.readLn();
		os.exitProcess(1);
		
	endtry;






	// Testung conv.i16ToStr

	try

		bufTest( u16ToStr,             0,           "0", $00160);
		bufTest( u16ToStr,             1,           "1", $00161);
		bufTest( u16ToStr,             2,           "2", $00162);
		bufTest( u16ToStr,             3,           "3", $00163);
		bufTest( u16ToStr,             4,           "4", $00164);
		bufTest( u16ToStr,             5,           "5", $00165);
		bufTest( u16ToStr,             6,           "6", $00166);
		bufTest( u16ToStr,             7,           "7", $00167);
		bufTest( u16ToStr,             8,           "8", $00168);
		bufTest( u16ToStr,             9,           "9", $00169);
		bufTest( u16ToStr,            10,          "10", $01161);
		bufTest( u16ToStr,            20,          "20", $01162);
		bufTest( u16ToStr,            30,          "30", $01163);
		bufTest( u16ToStr,            40,          "40", $01164);
		bufTest( u16ToStr,            50,          "50", $01165);
		bufTest( u16ToStr,            60,          "60", $01166);
		bufTest( u16ToStr,            70,          "70", $01167);
		bufTest( u16ToStr,            80,          "80", $01168);
		bufTest( u16ToStr,            90,          "90", $01169);
		bufTest( u16ToStr,           100,         "100", $02161);
		bufTest( u16ToStr,           200,         "200", $02162);
		bufTest( u16ToStr,           300,         "300", $02163);
		bufTest( u16ToStr,           400,         "400", $02164);
		bufTest( u16ToStr,           500,         "500", $02165);
		bufTest( u16ToStr,           600,         "600", $02166);
		bufTest( u16ToStr,           700,         "700", $02167);
		bufTest( u16ToStr,           800,         "800", $02168);
		bufTest( u16ToStr,           900,         "900", $02169);
		bufTest( u16ToStr,         1_000,        "1000", $03161);
		bufTest( u16ToStr,         2_000,        "2000", $03162);
		bufTest( u16ToStr,         3_000,        "3000", $03163);
		bufTest( u16ToStr,         4_000,        "4000", $03164);
		bufTest( u16ToStr,         5_000,        "5000", $03165);
		bufTest( u16ToStr,         6_000,        "6000", $03166);
		bufTest( u16ToStr,         7_000,        "7000", $03167);
		bufTest( u16ToStr,         8_000,        "8000", $03168);
		bufTest( u16ToStr,         9_000,        "9000", $03169);
		bufTest( u16ToStr,        10_000,       "10000", $04161);
		bufTest( u16ToStr,        20_000,       "20000", $04162);
		bufTest( u16ToStr,        30_000,       "30000", $04163);

		
		readonly
			i16Test_0	:string[64] :=
						[
							#for( i := 0 to 62 )
							
								mkStr( "0", ' ', i ),
								
							#endfor
							mkStr( "0", ' ', 63 )
						];
						
			i16Test_1	:string[64] :=
						[
							#for( i := 0 to 62 )
							
								mkStr2( "1", '.', i ),
								
							#endfor
							mkStr2( "1", '.', 63 )
						];
						
			i16Test_3	:string[64] :=
						[
							#for( i := 0 to 62 )
							
								mkStr2( "32767", '*', i ),
								
							#endfor
							mkStr2( "32767", '*', 63 )
						];
						
		endreadonly;
		strTest(  u16ToStr, 0,  i16Test_0, $F0A0, 63, ' ' );				
		strTest2( u16ToStr, 1,  i16Test_1, $F0A1, 63, '.' );				
		strTest2( u16ToStr, 32767, i16Test_3, $F0A3, 63, '*' );				
	
		
		stderr.put( "conv.u16ToStr succeeded!" nl );
		
	  anyexception
	  
		stderr.put
		( 
			nl nl 
			"***************************************************" nl
			"conv.u16ToStr failed! eax=", eax, nl
			"***************************************************" nl
			nl 
		);
		stdout.put( "Press Enter to Continue: " );
		stdin.readLn();
		os.exitProcess(1);
		
	endtry;






	// Testung conv.i32ToStr

	try

		bufTest( u32ToStr,             0,           "0", $00320);
		bufTest( u32ToStr,             1,           "1", $00321);
		bufTest( u32ToStr,             2,           "2", $00322);
		bufTest( u32ToStr,             3,           "3", $00323);
		bufTest( u32ToStr,             4,           "4", $00324);
		bufTest( u32ToStr,             5,           "5", $00325);
		bufTest( u32ToStr,             6,           "6", $00326);
		bufTest( u32ToStr,             7,           "7", $00327);
		bufTest( u32ToStr,             8,           "8", $00328);
		bufTest( u32ToStr,             9,           "9", $00329);
		bufTest( u32ToStr,            10,          "10", $01321);
		bufTest( u32ToStr,            20,          "20", $01322);
		bufTest( u32ToStr,            30,          "30", $01323);
		bufTest( u32ToStr,            40,          "40", $01324);
		bufTest( u32ToStr,            50,          "50", $01325);
		bufTest( u32ToStr,            60,          "60", $01326);
		bufTest( u32ToStr,            70,          "70", $01327);
		bufTest( u32ToStr,            80,          "80", $01328);
		bufTest( u32ToStr,            90,          "90", $01329);
		bufTest( u32ToStr,           100,         "100", $02321);
		bufTest( u32ToStr,           200,         "200", $02322);
		bufTest( u32ToStr,           300,         "300", $02323);
		bufTest( u32ToStr,           400,         "400", $02324);
		bufTest( u32ToStr,           500,         "500", $02325);
		bufTest( u32ToStr,           600,         "600", $02326);
		bufTest( u32ToStr,           700,         "700", $02327);
		bufTest( u32ToStr,           800,         "800", $02328);
		bufTest( u32ToStr,           900,         "900", $02329);
		bufTest( u32ToStr,         1_000,        "1000", $03321);
		bufTest( u32ToStr,         2_000,        "2000", $03322);
		bufTest( u32ToStr,         3_000,        "3000", $03323);
		bufTest( u32ToStr,         4_000,        "4000", $03324);
		bufTest( u32ToStr,         5_000,        "5000", $03325);
		bufTest( u32ToStr,         6_000,        "6000", $03326);
		bufTest( u32ToStr,         7_000,        "7000", $03327);
		bufTest( u32ToStr,         8_000,        "8000", $03328);
		bufTest( u32ToStr,         9_000,        "9000", $03329);
		bufTest( u32ToStr,        10_000,       "10000", $04321);
		bufTest( u32ToStr,        20_000,       "20000", $04322);
		bufTest( u32ToStr,        30_000,       "30000", $04323);
		bufTest( u32ToStr,        40_000,       "40000", $04324);
		bufTest( u32ToStr,        50_000,       "50000", $04325);
		bufTest( u32ToStr,        60_000,       "60000", $04326);
		bufTest( u32ToStr,        70_000,       "70000", $04327);
		bufTest( u32ToStr,        80_000,       "80000", $04328);
		bufTest( u32ToStr,        90_000,       "90000", $04329);
		bufTest( u32ToStr,       100_000,      "100000", $05321);
		bufTest( u32ToStr,       200_000,      "200000", $05322);
		bufTest( u32ToStr,       300_000,      "300000", $05323);
		bufTest( u32ToStr,       400_000,      "400000", $05324);
		bufTest( u32ToStr,       500_000,      "500000", $05325);
		bufTest( u32ToStr,       600_000,      "600000", $05326);
		bufTest( u32ToStr,       700_000,      "700000", $05327);
		bufTest( u32ToStr,       800_000,      "800000", $05328);
		bufTest( u32ToStr,       900_000,      "900000", $05329);
		bufTest( u32ToStr,     1_000_000,     "1000000", $06321);
		bufTest( u32ToStr,     2_000_000,     "2000000", $06322);
		bufTest( u32ToStr,     3_000_000,     "3000000", $06323);
		bufTest( u32ToStr,     4_000_000,     "4000000", $06324);
		bufTest( u32ToStr,     5_000_000,     "5000000", $06325);
		bufTest( u32ToStr,     6_000_000,     "6000000", $06326);
		bufTest( u32ToStr,     7_000_000,     "7000000", $06327);
		bufTest( u32ToStr,     8_000_000,     "8000000", $06328);
		bufTest( u32ToStr,     9_000_000,     "9000000", $06329);
		bufTest( u32ToStr,    10_000_000,    "10000000", $07321);
		bufTest( u32ToStr,    20_000_000,    "20000000", $07322);
		bufTest( u32ToStr,    30_000_000,    "30000000", $07323);
		bufTest( u32ToStr,    40_000_000,    "40000000", $07324);
		bufTest( u32ToStr,    50_000_000,    "50000000", $07325);
		bufTest( u32ToStr,    60_000_000,    "60000000", $07326);
		bufTest( u32ToStr,    70_000_000,    "70000000", $07327);
		bufTest( u32ToStr,    80_000_000,    "80000000", $07328);
		bufTest( u32ToStr,    90_000_000,    "90000000", $07329);
		bufTest( u32ToStr,   100_000_000,   "100000000", $08321);
		bufTest( u32ToStr,   200_000_000,   "200000000", $08322);
		bufTest( u32ToStr,   300_000_000,   "300000000", $08323);
		bufTest( u32ToStr,   400_000_000,   "400000000", $08324);
		bufTest( u32ToStr,   500_000_000,   "500000000", $08325);
		bufTest( u32ToStr,   600_000_000,   "600000000", $08326);
		bufTest( u32ToStr,   700_000_000,   "700000000", $08327);
		bufTest( u32ToStr,   800_000_000,   "800000000", $08328);
		bufTest( u32ToStr,   900_000_000,   "900000000", $08329);
		bufTest( u32ToStr, 1_000_000_000,  "1000000000", $09321);
		bufTest( u32ToStr, 2_000_000_000,  "2000000000", $09322);

		
		readonly
			i32Test_a	:string[64] :=
						[
							#for( i := 0 to 62 )
							
								mkStr( "0", ' ', i ),
								
							#endfor
							mkStr( "0", ' ', 63 )
						];
						
			i32Test_b	:string[64] :=
						[
							#for( i := 0 to 62 )
							
								mkStr2( "127", '.', i ),
								
							#endfor
							mkStr2( "127", '.', 63 )
						];
						
		endreadonly;
		strTest( u32ToStr, 0, i32Test_a, $a0F0A0, 63, ' ' );				
		strTest2( u32ToStr, 127, i32Test_b, $a0F0A1, 63, '.' );				

		
		stderr.put( "conv.u32ToStr succeeded!" nl );
		
	  anyexception
	  
		stderr.put
		( 
			nl nl 
			"***************************************************" nl
			"conv.u32ToStr failed! eax=", eax, nl
			"***************************************************" nl
			nl 
		);
		stdout.put( "Press Enter to Continue: " );
		stdin.readLn();
		os.exitProcess(1);
		
	endtry;






	// Testung conv.i64ToStr

	try
		
		bufTest( u64ToStr,             0,           "0", $00640);
		bufTest( u64ToStr,             1,           "1", $00641);
		bufTest( u64ToStr,             2,           "2", $00642);
		bufTest( u64ToStr,             3,           "3", $00643);
		bufTest( u64ToStr,             4,           "4", $00644);
		bufTest( u64ToStr,             5,           "5", $00645);
		bufTest( u64ToStr,             6,           "6", $00646);
		bufTest( u64ToStr,             7,           "7", $00647);
		bufTest( u64ToStr,             8,           "8", $00648);
		bufTest( u64ToStr,             9,           "9", $00649);
		bufTest( u64ToStr,             0,           "0", $a00640);
		bufTest( u64ToStr,            10,          "10", $01641);
		bufTest( u64ToStr,            20,          "20", $01642);
		bufTest( u64ToStr,            30,          "30", $01643);
		bufTest( u64ToStr,            40,          "40", $01644);
		bufTest( u64ToStr,            50,          "50", $01645);
		bufTest( u64ToStr,            60,          "60", $01646);
		bufTest( u64ToStr,            70,          "70", $01647);
		bufTest( u64ToStr,            80,          "80", $01648);
		bufTest( u64ToStr,            90,          "90", $01649);
		bufTest( u64ToStr,           100,         "100", $02641);
		bufTest( u64ToStr,           200,         "200", $02642);
		bufTest( u64ToStr,           300,         "300", $02643);
		bufTest( u64ToStr,           400,         "400", $02644);
		bufTest( u64ToStr,           500,         "500", $02645);
		bufTest( u64ToStr,           600,         "600", $02646);
		bufTest( u64ToStr,           700,         "700", $02647);
		bufTest( u64ToStr,           800,         "800", $02648);
		bufTest( u64ToStr,           900,         "900", $02649);
		bufTest( u64ToStr,         1_000,        "1000", $03641);
		bufTest( u64ToStr,         2_000,        "2000", $03642);
		bufTest( u64ToStr,         3_000,        "3000", $03643);
		bufTest( u64ToStr,         4_000,        "4000", $03644);
		bufTest( u64ToStr,         5_000,        "5000", $03645);
		bufTest( u64ToStr,         6_000,        "6000", $03646);
		bufTest( u64ToStr,         7_000,        "7000", $03647);
		bufTest( u64ToStr,         8_000,        "8000", $03648);
		bufTest( u64ToStr,         9_000,        "9000", $03649);
		bufTest( u64ToStr,        10_000,       "10000", $04641);
		bufTest( u64ToStr,        20_000,       "20000", $04642);
		bufTest( u64ToStr,        30_000,       "30000", $04643);
		bufTest( u64ToStr,        40_000,       "40000", $04644);
		bufTest( u64ToStr,        50_000,       "50000", $04645);
		bufTest( u64ToStr,        60_000,       "60000", $04646);
		bufTest( u64ToStr,        70_000,       "70000", $04647);
		bufTest( u64ToStr,        80_000,       "80000", $04648);
		bufTest( u64ToStr,        90_000,       "90000", $04649);
		bufTest( u64ToStr,       100_000,      "100000", $05641);
		bufTest( u64ToStr,       200_000,      "200000", $05642);
		bufTest( u64ToStr,       300_000,      "300000", $05643);
		bufTest( u64ToStr,       400_000,      "400000", $05644);
		bufTest( u64ToStr,       500_000,      "500000", $05645);
		bufTest( u64ToStr,       600_000,      "600000", $05646);
		bufTest( u64ToStr,       700_000,      "700000", $05647);
		bufTest( u64ToStr,       800_000,      "800000", $05648);
		bufTest( u64ToStr,       900_000,      "900000", $05649);
		bufTest( u64ToStr,     1_000_000,     "1000000", $06641);
		bufTest( u64ToStr,     2_000_000,     "2000000", $06642);
		bufTest( u64ToStr,     3_000_000,     "3000000", $06643);
		bufTest( u64ToStr,     4_000_000,     "4000000", $06644);
		bufTest( u64ToStr,     5_000_000,     "5000000", $06645);
		bufTest( u64ToStr,     6_000_000,     "6000000", $06646);
		bufTest( u64ToStr,     7_000_000,     "7000000", $06647);
		bufTest( u64ToStr,     8_000_000,     "8000000", $06648);
		bufTest( u64ToStr,     9_000_000,     "9000000", $06649);
		bufTest( u64ToStr,    10_000_000,    "10000000", $07641);
		bufTest( u64ToStr,    20_000_000,    "20000000", $07642);
		bufTest( u64ToStr,    30_000_000,    "30000000", $07643);
		bufTest( u64ToStr,    40_000_000,    "40000000", $07644);
		bufTest( u64ToStr,    50_000_000,    "50000000", $07645);
		bufTest( u64ToStr,    60_000_000,    "60000000", $07646);
		bufTest( u64ToStr,    70_000_000,    "70000000", $07647);
		bufTest( u64ToStr,    80_000_000,    "80000000", $07648);
		bufTest( u64ToStr,    90_000_000,    "90000000", $07649);
		bufTest( u64ToStr,   100_000_000,   "100000000", $08641);
		bufTest( u64ToStr,   200_000_000,   "200000000", $08642);
		bufTest( u64ToStr,   300_000_000,   "300000000", $08643);
		bufTest( u64ToStr,   400_000_000,   "400000000", $08644);
		bufTest( u64ToStr,   500_000_000,   "500000000", $08645);
		bufTest( u64ToStr,   600_000_000,   "600000000", $08646);
		bufTest( u64ToStr,   700_000_000,   "700000000", $08647);
		bufTest( u64ToStr,   800_000_000,   "800000000", $08648);
		bufTest( u64ToStr,   900_000_000,   "900000000", $08649);
		bufTest( u64ToStr, 1_000_000_000,  "1000000000", $09641);
		bufTest( u64ToStr, 2_000_000_000,  "2000000000", $09642);
		bufTest( u64ToStr, 3_000_000_000,  "3000000000", $09643);
		bufTest( u64ToStr, 4_000_000_000,  "4000000000", $09644);
		bufTest( u64ToStr, 5_000_000_000,  "5000000000", $09645);
		bufTest( u64ToStr, 6_000_000_000,  "6000000000", $09646);
		bufTest( u64ToStr, 7_000_000_000,  "7000000000", $09647);
		bufTest( u64ToStr, 8_000_000_000,  "8000000000", $09648);
		bufTest( u64ToStr, 9_000_000_000,  "9000000000", $09649);
		bufTest( u64ToStr,10_000_000_000, "10000000000", $0A641);
		bufTest( u64ToStr,20_000_000_000, "20000000000", $0A642);
		bufTest( u64ToStr,30_000_000_000, "30000000000", $0A643);
		bufTest( u64ToStr,40_000_000_000, "40000000000", $0A644);
		bufTest( u64ToStr,50_000_000_000, "50000000000", $0A645);
		bufTest( u64ToStr,60_000_000_000, "60000000000", $0A646);
		bufTest( u64ToStr,70_000_000_000, "70000000000", $0A647);
		bufTest( u64ToStr,80_000_000_000, "80000000000", $0A648);
		bufTest( u64ToStr,90_000_000_000, "90000000000", $0A649);
		bufTest( u64ToStr,100_000_000_000, "100000000000", $0B641);
		bufTest( u64ToStr,200_000_000_000, "200000000000", $0B642);
		bufTest( u64ToStr,300_000_000_000, "300000000000", $0B643);
		bufTest( u64ToStr,400_000_000_000, "400000000000", $0B644);
		bufTest( u64ToStr,500_000_000_000, "500000000000", $0B645);
		bufTest( u64ToStr,600_000_000_000, "600000000000", $0B646);
		bufTest( u64ToStr,700_000_000_000, "700000000000", $0B647);
		bufTest( u64ToStr,800_000_000_000, "800000000000", $0B648);
		bufTest( u64ToStr,900_000_000_000, "900000000000", $0B649);
		bufTest( u64ToStr,1_000_000_000_000, "1000000000000", $0C641);
		bufTest( u64ToStr,2_000_000_000_000, "2000000000000", $0C642);
		bufTest( u64ToStr,3_000_000_000_000, "3000000000000", $0C643);
		bufTest( u64ToStr,4_000_000_000_000, "4000000000000", $0C644);
		bufTest( u64ToStr,5_000_000_000_000, "5000000000000", $0C645);
		bufTest( u64ToStr,6_000_000_000_000, "6000000000000", $0C646);
		bufTest( u64ToStr,7_000_000_000_000, "7000000000000", $0C647);
		bufTest( u64ToStr,8_000_000_000_000, "8000000000000", $0C648);
		bufTest( u64ToStr,9_000_000_000_000, "9000000000000", $0C649);
		bufTest( u64ToStr,10_000_000_000_000,  "10000000000000", $0D641);
		bufTest( u64ToStr,20_000_000_000_000,  "20000000000000", $0D642);
		bufTest( u64ToStr,30_000_000_000_000,  "30000000000000", $0D643);
		bufTest( u64ToStr,40_000_000_000_000,  "40000000000000", $0D644);
		bufTest( u64ToStr,50_000_000_000_000,  "50000000000000", $0D645);
		bufTest( u64ToStr,60_000_000_000_000,  "60000000000000", $0D646);
		bufTest( u64ToStr,70_000_000_000_000,  "70000000000000", $0D647);
		bufTest( u64ToStr,80_000_000_000_000,  "80000000000000", $0D648);
		bufTest( u64ToStr,90_000_000_000_000,  "90000000000000", $0D649);
		bufTest( u64ToStr,100_000_000_000_000,   "100000000000000", $0E641);
		bufTest( u64ToStr,200_000_000_000_000,   "200000000000000", $0E642);
		bufTest( u64ToStr,300_000_000_000_000,   "300000000000000", $0E643);
		bufTest( u64ToStr,400_000_000_000_000,   "400000000000000", $0E644);
		bufTest( u64ToStr,500_000_000_000_000,   "500000000000000", $0E645);
		bufTest( u64ToStr,600_000_000_000_000,   "600000000000000", $0E646);
		bufTest( u64ToStr,700_000_000_000_000,   "700000000000000", $0E647);
		bufTest( u64ToStr,800_000_000_000_000,   "800000000000000", $0E648);
		bufTest( u64ToStr,900_000_000_000_000,   "900000000000000", $0E649);
		bufTest( u64ToStr,1_000_000_000_000_000,    "1000000000000000", $0F641);
		bufTest( u64ToStr,2_000_000_000_000_000,    "2000000000000000", $0F642);
		bufTest( u64ToStr,3_000_000_000_000_000,    "3000000000000000", $0F643);
		bufTest( u64ToStr,4_000_000_000_000_000,    "4000000000000000", $0F644);
		bufTest( u64ToStr,5_000_000_000_000_000,    "5000000000000000", $0F645);
		bufTest( u64ToStr,6_000_000_000_000_000,    "6000000000000000", $0F646);
		bufTest( u64ToStr,7_000_000_000_000_000,    "7000000000000000", $0F647);
		bufTest( u64ToStr,8_000_000_000_000_000,    "8000000000000000", $0F648);
		bufTest( u64ToStr,9_000_000_000_000_000,    "9000000000000000", $0F649);
		bufTest( u64ToStr,10_000_000_000_000_000,     "10000000000000000", $10641);
		bufTest( u64ToStr,20_000_000_000_000_000,     "20000000000000000", $10642);
		bufTest( u64ToStr,30_000_000_000_000_000,     "30000000000000000", $10643);
		bufTest( u64ToStr,40_000_000_000_000_000,     "40000000000000000", $10644);
		bufTest( u64ToStr,50_000_000_000_000_000,     "50000000000000000", $10645);
		bufTest( u64ToStr,60_000_000_000_000_000,     "60000000000000000", $10646);
		bufTest( u64ToStr,70_000_000_000_000_000,     "70000000000000000", $10647);
		bufTest( u64ToStr,80_000_000_000_000_000,     "80000000000000000", $10648);
		bufTest( u64ToStr,90_000_000_000_000_000,     "90000000000000000", $10649);
		bufTest( u64ToStr,100_000_000_000_000_000,      "100000000000000000", $11641);
		bufTest( u64ToStr,200_000_000_000_000_000,      "200000000000000000", $11642);
		bufTest( u64ToStr,300_000_000_000_000_000,      "300000000000000000", $11643);
		bufTest( u64ToStr,400_000_000_000_000_000,      "400000000000000000", $11644);
		bufTest( u64ToStr,500_000_000_000_000_000,      "500000000000000000", $11645);
		bufTest( u64ToStr,600_000_000_000_000_000,      "600000000000000000", $11646);
		bufTest( u64ToStr,700_000_000_000_000_000,      "700000000000000000", $11647);
		bufTest( u64ToStr,800_000_000_000_000_000,      "800000000000000000", $11648);
		bufTest( u64ToStr,900_000_000_000_000_000,      "900000000000000000", $11649);
		bufTest( u64ToStr,1_000_000_000_000_000_000,       "1000000000000000000", $12641);
		bufTest( u64ToStr,2_000_000_000_000_000_000,       "2000000000000000000", $12642);
		bufTest( u64ToStr,3_000_000_000_000_000_000,       "3000000000000000000", $12643);
		bufTest( u64ToStr,4_000_000_000_000_000_000,       "4000000000000000000", $12644);
		bufTest( u64ToStr,5_000_000_000_000_000_000,       "5000000000000000000", $12645);
		bufTest( u64ToStr,6_000_000_000_000_000_000,       "6000000000000000000", $12646);
		bufTest( u64ToStr,7_000_000_000_000_000_000,       "7000000000000000000", $12647);
		bufTest( u64ToStr,8_000_000_000_000_000_000,       "8000000000000000000", $12648);
		bufTest( u64ToStr,9_000_000_000_000_000_000,       "9000000000000000000", $12649);

		
		readonly
			i64Test_a	:string[64] :=
						[
							#for( i := 0 to 62 )
							
								mkStr( "0", ' ', i ),
								
							#endfor
							mkStr( "0", ' ', 63 )
						];
						
			i64Test_b	:string[64] :=
						[
							#for( i := 0 to 62 )
							
								mkStr2( "127", '.', i ),
								
							#endfor
							mkStr2( "127", '.', 63 )
						];
						
		endreadonly;
		strTest( u64ToStr, 0, i64Test_a, $a0F0A0, 63, ' ' );				
		strTest2( u64ToStr, 127, i64Test_b, $a0F0A1, 63, '.' );				


		stderr.put( "conv.u64ToStr succeeded!" nl );
		
	  anyexception
	  
		stderr.put
		( 
			nl nl 
			"***************************************************" nl
			"conv.u64ToStr failed! eax=", eax, nl
			"***************************************************" nl
			nl 
		);
		stdout.put( "Press Enter to Continue: " );
		stdin.readLn();
		os.exitProcess(1);
		
	endtry;






	// Testung conv.i128ToStr

	try

		bufTest( u128ToStr,0,"0", $0_1280);
		bufTest( u128ToStr,1,"1", $0_1281);
		bufTest( u128ToStr,2,"2", $0_1282);
		bufTest( u128ToStr,3,"3", $0_1283);
		bufTest( u128ToStr,4,"4", $0_1284);
		bufTest( u128ToStr,5,"5", $0_1285);
		bufTest( u128ToStr,6,"6", $0_1286);
		bufTest( u128ToStr,7,"7", $0_1287);
		bufTest( u128ToStr,8,"8", $0_1288);
		bufTest( u128ToStr,9,"9", $0_1289);
		bufTest( u128ToStr,0,"0", $a0_1280);
		bufTest( u128ToStr,10,"10", $1_1281);
		bufTest( u128ToStr,20,"20", $1_1282);
		bufTest( u128ToStr,30,"30", $1_1283);
		bufTest( u128ToStr,40,"40", $1_1284);
		bufTest( u128ToStr,50,"50", $1_1285);
		bufTest( u128ToStr,60,"60", $1_1286);
		bufTest( u128ToStr,70,"70", $1_1287);
		bufTest( u128ToStr,80,"80", $1_1288);
		bufTest( u128ToStr,90,"90", $1_1289);
		bufTest( u128ToStr,100,"100", $2_1281);
		bufTest( u128ToStr,200,"200", $2_1282);
		bufTest( u128ToStr,300,"300", $2_1283);
		bufTest( u128ToStr,400,"400", $2_1284);
		bufTest( u128ToStr,500,"500", $2_1285);
		bufTest( u128ToStr,600,"600", $2_1286);
		bufTest( u128ToStr,700,"700", $2_1287);
		bufTest( u128ToStr,800,"800", $2_1288);
		bufTest( u128ToStr,900,"900", $2_1289);
		bufTest( u128ToStr,1_000,"1000", $3_1281);
		bufTest( u128ToStr,2_000,"2000", $3_1282);
		bufTest( u128ToStr,3_000,"3000", $3_1283);
		bufTest( u128ToStr,4_000,"4000", $3_1284);
		bufTest( u128ToStr,5_000,"5000", $3_1285);
		bufTest( u128ToStr,6_000,"6000", $3_1286);
		bufTest( u128ToStr,7_000,"7000", $3_1287);
		bufTest( u128ToStr,8_000,"8000", $3_1288);
		bufTest( u128ToStr,9_000,"9000", $3_1289);
		bufTest( u128ToStr,10_000,"10000", $4_1281);
		bufTest( u128ToStr,20_000,"20000", $4_1282);
		bufTest( u128ToStr,30_000,"30000", $4_1283);
		bufTest( u128ToStr,40_000,"40000", $4_1284);
		bufTest( u128ToStr,50_000,"50000", $4_1285);
		bufTest( u128ToStr,60_000,"60000", $4_1286);
		bufTest( u128ToStr,70_000,"70000", $4_1287);
		bufTest( u128ToStr,80_000,"80000", $4_1288);
		bufTest( u128ToStr,90_000,"90000", $4_1289);
		bufTest( u128ToStr,100_000,"100000", $5_1281);
		bufTest( u128ToStr,200_000,"200000", $5_1282);
		bufTest( u128ToStr,300_000,"300000", $5_1283);
		bufTest( u128ToStr,400_000,"400000", $5_1284);
		bufTest( u128ToStr,500_000,"500000", $5_1285);
		bufTest( u128ToStr,600_000,"600000", $5_1286);
		bufTest( u128ToStr,700_000,"700000", $5_1287);
		bufTest( u128ToStr,800_000,"800000", $5_1288);
		bufTest( u128ToStr,900_000,"900000", $5_1289);
		bufTest( u128ToStr,1_000_000,"1000000", $6_1281);
		bufTest( u128ToStr,2_000_000,"2000000", $6_1282);
		bufTest( u128ToStr,3_000_000,"3000000", $6_1283);
		bufTest( u128ToStr,4_000_000,"4000000", $6_1284);
		bufTest( u128ToStr,5_000_000,"5000000", $6_1285);
		bufTest( u128ToStr,6_000_000,"6000000", $6_1286);
		bufTest( u128ToStr,7_000_000,"7000000", $6_1287);
		bufTest( u128ToStr,8_000_000,"8000000", $6_1288);
		bufTest( u128ToStr,9_000_000,"9000000", $6_1289);
		bufTest( u128ToStr,10_000_000,"10000000", $7_1281);
		bufTest( u128ToStr,20_000_000,"20000000", $7_1282);
		bufTest( u128ToStr,30_000_000,"30000000", $7_1283);
		bufTest( u128ToStr,40_000_000,"40000000", $7_1284);
		bufTest( u128ToStr,50_000_000,"50000000", $7_1285);
		bufTest( u128ToStr,60_000_000,"60000000", $7_1286);
		bufTest( u128ToStr,70_000_000,"70000000", $7_1287);
		bufTest( u128ToStr,80_000_000,"80000000", $7_1288);
		bufTest( u128ToStr,90_000_000,"90000000", $7_1289);
		bufTest( u128ToStr,100_000_000,"100000000", $8_1281);
		bufTest( u128ToStr,200_000_000,"200000000", $8_1282);
		bufTest( u128ToStr,300_000_000,"300000000", $8_1283);
		bufTest( u128ToStr,400_000_000,"400000000", $8_1284);
		bufTest( u128ToStr,500_000_000,"500000000", $8_1285);
		bufTest( u128ToStr,600_000_000,"600000000", $8_1286);
		bufTest( u128ToStr,700_000_000,"700000000", $8_1287);
		bufTest( u128ToStr,800_000_000,"800000000", $8_1288);
		bufTest( u128ToStr,900_000_000,"900000000", $8_1289);
		bufTest( u128ToStr,1_000_000_000,"1000000000", $9_1281);
		bufTest( u128ToStr,2_000_000_000,"2000000000", $9_1282);
		bufTest( u128ToStr,3_000_000_000,"3000000000", $9_1283);
		bufTest( u128ToStr,4_000_000_000,"4000000000", $9_1284);
		bufTest( u128ToStr,5_000_000_000,"5000000000", $9_1285);
		bufTest( u128ToStr,6_000_000_000,"6000000000", $9_1286);
		bufTest( u128ToStr,7_000_000_000,"7000000000", $9_1287);
		bufTest( u128ToStr,8_000_000_000,"8000000000", $9_1288);
		bufTest( u128ToStr,9_000_000_000,"9000000000", $9_1289);
		bufTest( u128ToStr,10_000_000_000,"10000000000", $A_1281);
		bufTest( u128ToStr,20_000_000_000,"20000000000", $A_1282);
		bufTest( u128ToStr,30_000_000_000,"30000000000", $A_1283);
		bufTest( u128ToStr,40_000_000_000,"40000000000", $A_1284);
		bufTest( u128ToStr,50_000_000_000,"50000000000", $A_1285);
		bufTest( u128ToStr,60_000_000_000,"60000000000", $A_1286);
		bufTest( u128ToStr,70_000_000_000,"70000000000", $A_1287);
		bufTest( u128ToStr,80_000_000_000,"80000000000", $A_1288);
		bufTest( u128ToStr,90_000_000_000,"90000000000", $A_1289);
		bufTest( u128ToStr,100_000_000_000,"100000000000", $B_1281);
		bufTest( u128ToStr,200_000_000_000,"200000000000", $B_1282);
		bufTest( u128ToStr,300_000_000_000,"300000000000", $B_1283);
		bufTest( u128ToStr,400_000_000_000,"400000000000", $B_1284);
		bufTest( u128ToStr,500_000_000_000,"500000000000", $B_1285);
		bufTest( u128ToStr,600_000_000_000,"600000000000", $B_1286);
		bufTest( u128ToStr,700_000_000_000,"700000000000", $B_1287);
		bufTest( u128ToStr,800_000_000_000,"800000000000", $B_1288);
		bufTest( u128ToStr,900_000_000_000,"900000000000", $B_1289);
		bufTest( u128ToStr,1_000_000_000_000,"1000000000000", $C_1281);
		bufTest( u128ToStr,2_000_000_000_000,"2000000000000", $C_1282);
		bufTest( u128ToStr,3_000_000_000_000,"3000000000000", $C_1283);
		bufTest( u128ToStr,4_000_000_000_000,"4000000000000", $C_1284);
		bufTest( u128ToStr,5_000_000_000_000,"5000000000000", $C_1285);
		bufTest( u128ToStr,6_000_000_000_000,"6000000000000", $C_1286);
		bufTest( u128ToStr,7_000_000_000_000,"7000000000000", $C_1287);
		bufTest( u128ToStr,8_000_000_000_000,"8000000000000", $C_1288);
		bufTest( u128ToStr,9_000_000_000_000,"9000000000000", $C_1289);
		bufTest( u128ToStr,10_000_000_000_000,"10000000000000", $D_1281);
		bufTest( u128ToStr,20_000_000_000_000,"20000000000000", $D_1282);
		bufTest( u128ToStr,30_000_000_000_000,"30000000000000", $D_1283);
		bufTest( u128ToStr,40_000_000_000_000,"40000000000000", $D_1284);
		bufTest( u128ToStr,50_000_000_000_000,"50000000000000", $D_1285);
		bufTest( u128ToStr,60_000_000_000_000,"60000000000000", $D_1286);
		bufTest( u128ToStr,70_000_000_000_000,"70000000000000", $D_1287);
		bufTest( u128ToStr,80_000_000_000_000,"80000000000000", $D_1288);
		bufTest( u128ToStr,90_000_000_000_000,"90000000000000", $D_1289);
		bufTest( u128ToStr,100_000_000_000_000,"100000000000000", $E_1281);
		bufTest( u128ToStr,200_000_000_000_000,"200000000000000", $E_1282);
		bufTest( u128ToStr,300_000_000_000_000,"300000000000000", $E_1283);
		bufTest( u128ToStr,400_000_000_000_000,"400000000000000", $E_1284);
		bufTest( u128ToStr,500_000_000_000_000,"500000000000000", $E_1285);
		bufTest( u128ToStr,600_000_000_000_000,"600000000000000", $E_1286);
		bufTest( u128ToStr,700_000_000_000_000,"700000000000000", $E_1287);
		bufTest( u128ToStr,800_000_000_000_000,"800000000000000", $E_1288);
		bufTest( u128ToStr,900_000_000_000_000,"900000000000000", $E_1289);
		bufTest( u128ToStr,1_000_000_000_000_000,"1000000000000000", $F_1281);
		bufTest( u128ToStr,2_000_000_000_000_000,"2000000000000000", $F_1282);
		bufTest( u128ToStr,3_000_000_000_000_000,"3000000000000000", $F_1283);
		bufTest( u128ToStr,4_000_000_000_000_000,"4000000000000000", $F_1284);
		bufTest( u128ToStr,5_000_000_000_000_000,"5000000000000000", $F_1285);
		bufTest( u128ToStr,6_000_000_000_000_000,"6000000000000000", $F_1286);
		bufTest( u128ToStr,7_000_000_000_000_000,"7000000000000000", $F_1287);
		bufTest( u128ToStr,8_000_000_000_000_000,"8000000000000000", $F_1288);
		bufTest( u128ToStr,9_000_000_000_000_000,"9000000000000000", $F_1289);
		bufTest( u128ToStr,10_000_000_000_000_000,"10000000000000000", $0_1281);
		bufTest( u128ToStr,20_000_000_000_000_000,"20000000000000000", $0_1282);
		bufTest( u128ToStr,30_000_000_000_000_000,"30000000000000000", $0_1283);
		bufTest( u128ToStr,40_000_000_000_000_000,"40000000000000000", $0_1284);
		bufTest( u128ToStr,50_000_000_000_000_000,"50000000000000000", $0_1285);
		bufTest( u128ToStr,60_000_000_000_000_000,"60000000000000000", $0_1286);
		bufTest( u128ToStr,70_000_000_000_000_000,"70000000000000000", $0_1287);
		bufTest( u128ToStr,80_000_000_000_000_000,"80000000000000000", $0_1288);
		bufTest( u128ToStr,90_000_000_000_000_000,"90000000000000000", $0_1289);
		bufTest( u128ToStr,100_000_000_000_000_000,"100000000000000000", $1_1281);
		bufTest( u128ToStr,200_000_000_000_000_000,"200000000000000000", $1_1282);
		bufTest( u128ToStr,300_000_000_000_000_000,"300000000000000000", $1_1283);
		bufTest( u128ToStr,400_000_000_000_000_000,"400000000000000000", $1_1284);
		bufTest( u128ToStr,500_000_000_000_000_000,"500000000000000000", $1_1285);
		bufTest( u128ToStr,600_000_000_000_000_000,"600000000000000000", $1_1286);
		bufTest( u128ToStr,700_000_000_000_000_000,"700000000000000000", $1_1287);
		bufTest( u128ToStr,800_000_000_000_000_000,"800000000000000000", $1_1288);
		bufTest( u128ToStr,900_000_000_000_000_000,"900000000000000000", $1_1289);
		bufTest( u128ToStr,1_000_000_000_000_000_000,"1000000000000000000", $2_1281);
		bufTest( u128ToStr,2_000_000_000_000_000_000,"2000000000000000000", $2_1282);
		bufTest( u128ToStr,3_000_000_000_000_000_000,"3000000000000000000", $2_1283);
		bufTest( u128ToStr,4_000_000_000_000_000_000,"4000000000000000000", $2_1284);
		bufTest( u128ToStr,5_000_000_000_000_000_000,"5000000000000000000", $2_1285);
		bufTest( u128ToStr,6_000_000_000_000_000_000,"6000000000000000000", $2_1286);
		bufTest( u128ToStr,7_000_000_000_000_000_000,"7000000000000000000", $2_1287);
		bufTest( u128ToStr,8_000_000_000_000_000_000,"8000000000000000000", $2_1288);
		bufTest( u128ToStr,9_000_000_000_000_000_000,"9000000000000000000", $2_1289);
		bufTest( u128ToStr,10_000_000_000_000_000_000,"10000000000000000000", $3_1281);
		bufTest( u128ToStr,20_000_000_000_000_000_000,"20000000000000000000", $3_1282);
		bufTest( u128ToStr,30_000_000_000_000_000_000,"30000000000000000000", $3_1283);
		bufTest( u128ToStr,40_000_000_000_000_000_000,"40000000000000000000", $3_1284);
		bufTest( u128ToStr,50_000_000_000_000_000_000,"50000000000000000000", $3_1285);
		bufTest( u128ToStr,60_000_000_000_000_000_000,"60000000000000000000", $3_1286);
		bufTest( u128ToStr,70_000_000_000_000_000_000,"70000000000000000000", $3_1287);
		bufTest( u128ToStr,80_000_000_000_000_000_000,"80000000000000000000", $3_1288);
		bufTest( u128ToStr,90_000_000_000_000_000_000,"90000000000000000000", $3_1289);
		bufTest( u128ToStr,100_000_000_000_000_000_000,"100000000000000000000", $4_1281);
		bufTest( u128ToStr,200_000_000_000_000_000_000,"200000000000000000000", $4_1282);
		bufTest( u128ToStr,300_000_000_000_000_000_000,"300000000000000000000", $4_1283);
		bufTest( u128ToStr,400_000_000_000_000_000_000,"400000000000000000000", $4_1284);
		bufTest( u128ToStr,500_000_000_000_000_000_000,"500000000000000000000", $4_1285);
		bufTest( u128ToStr,600_000_000_000_000_000_000,"600000000000000000000", $4_1286);
		bufTest( u128ToStr,700_000_000_000_000_000_000,"700000000000000000000", $4_1287);
		bufTest( u128ToStr,800_000_000_000_000_000_000,"800000000000000000000", $4_1288);
		bufTest( u128ToStr,900_000_000_000_000_000_000,"900000000000000000000", $4_1289);
		bufTest( u128ToStr,1_000_000_000_000_000_000_000,"1000000000000000000000", $5_1281);
		bufTest( u128ToStr,2_000_000_000_000_000_000_000,"2000000000000000000000", $5_1282);
		bufTest( u128ToStr,3_000_000_000_000_000_000_000,"3000000000000000000000", $5_1283);
		bufTest( u128ToStr,4_000_000_000_000_000_000_000,"4000000000000000000000", $5_1284);
		bufTest( u128ToStr,5_000_000_000_000_000_000_000,"5000000000000000000000", $5_1285);
		bufTest( u128ToStr,6_000_000_000_000_000_000_000,"6000000000000000000000", $5_1286);
		bufTest( u128ToStr,7_000_000_000_000_000_000_000,"7000000000000000000000", $5_1287);
		bufTest( u128ToStr,8_000_000_000_000_000_000_000,"8000000000000000000000", $5_1288);
		bufTest( u128ToStr,9_000_000_000_000_000_000_000,"9000000000000000000000", $5_1289);
		bufTest( u128ToStr,10_000_000_000_000_000_000_000,"10000000000000000000000", $6_1281);
		bufTest( u128ToStr,20_000_000_000_000_000_000_000,"20000000000000000000000", $6_1282);
		bufTest( u128ToStr,30_000_000_000_000_000_000_000,"30000000000000000000000", $6_1283);
		bufTest( u128ToStr,40_000_000_000_000_000_000_000,"40000000000000000000000", $6_1284);
		bufTest( u128ToStr,50_000_000_000_000_000_000_000,"50000000000000000000000", $6_1285);
		bufTest( u128ToStr,60_000_000_000_000_000_000_000,"60000000000000000000000", $6_1286);
		bufTest( u128ToStr,70_000_000_000_000_000_000_000,"70000000000000000000000", $6_1287);
		bufTest( u128ToStr,80_000_000_000_000_000_000_000,"80000000000000000000000", $6_1288);
		bufTest( u128ToStr,90_000_000_000_000_000_000_000,"90000000000000000000000", $6_1289);
		bufTest( u128ToStr,100_000_000_000_000_000_000_000,"100000000000000000000000", $7_1281);
		bufTest( u128ToStr,200_000_000_000_000_000_000_000,"200000000000000000000000", $7_1282);
		bufTest( u128ToStr,300_000_000_000_000_000_000_000,"300000000000000000000000", $7_1283);
		bufTest( u128ToStr,400_000_000_000_000_000_000_000,"400000000000000000000000", $7_1284);
		bufTest( u128ToStr,500_000_000_000_000_000_000_000,"500000000000000000000000", $7_1285);
		bufTest( u128ToStr,600_000_000_000_000_000_000_000,"600000000000000000000000", $7_1286);
		bufTest( u128ToStr,700_000_000_000_000_000_000_000,"700000000000000000000000", $7_1287);
		bufTest( u128ToStr,800_000_000_000_000_000_000_000,"800000000000000000000000", $7_1288);
		bufTest( u128ToStr,900_000_000_000_000_000_000_000,"900000000000000000000000", $7_1289);
		bufTest( u128ToStr,1_000_000_000_000_000_000_000_000,"1000000000000000000000000", $8_1281);
		bufTest( u128ToStr,2_000_000_000_000_000_000_000_000,"2000000000000000000000000", $8_1282);
		bufTest( u128ToStr,3_000_000_000_000_000_000_000_000,"3000000000000000000000000", $8_1283);
		bufTest( u128ToStr,4_000_000_000_000_000_000_000_000,"4000000000000000000000000", $8_1284);
		bufTest( u128ToStr,5_000_000_000_000_000_000_000_000,"5000000000000000000000000", $8_1285);
		bufTest( u128ToStr,6_000_000_000_000_000_000_000_000,"6000000000000000000000000", $8_1286);
		bufTest( u128ToStr,7_000_000_000_000_000_000_000_000,"7000000000000000000000000", $8_1287);
		bufTest( u128ToStr,8_000_000_000_000_000_000_000_000,"8000000000000000000000000", $8_1288);
		bufTest( u128ToStr,9_000_000_000_000_000_000_000_000,"9000000000000000000000000", $8_1289);
		bufTest( u128ToStr,10_000_000_000_000_000_000_000_000,"10000000000000000000000000", $9_1281);
		bufTest( u128ToStr,20_000_000_000_000_000_000_000_000,"20000000000000000000000000", $9_1282);
		bufTest( u128ToStr,30_000_000_000_000_000_000_000_000,"30000000000000000000000000", $9_1283);
		bufTest( u128ToStr,40_000_000_000_000_000_000_000_000,"40000000000000000000000000", $9_1284);
		bufTest( u128ToStr,50_000_000_000_000_000_000_000_000,"50000000000000000000000000", $9_1285);
		bufTest( u128ToStr,60_000_000_000_000_000_000_000_000,"60000000000000000000000000", $9_1286);
		bufTest( u128ToStr,70_000_000_000_000_000_000_000_000,"70000000000000000000000000", $9_1287);
		bufTest( u128ToStr,80_000_000_000_000_000_000_000_000,"80000000000000000000000000", $9_1288);
		bufTest( u128ToStr,90_000_000_000_000_000_000_000_000,"90000000000000000000000000", $9_1289);
		bufTest( u128ToStr,100_000_000_000_000_000_000_000_000,"100000000000000000000000000", $A_1281);
		bufTest( u128ToStr,200_000_000_000_000_000_000_000_000,"200000000000000000000000000", $A_1282);
		bufTest( u128ToStr,300_000_000_000_000_000_000_000_000,"300000000000000000000000000", $A_1283);
		bufTest( u128ToStr,400_000_000_000_000_000_000_000_000,"400000000000000000000000000", $A_1284);
		bufTest( u128ToStr,500_000_000_000_000_000_000_000_000,"500000000000000000000000000", $A_1285);
		bufTest( u128ToStr,600_000_000_000_000_000_000_000_000,"600000000000000000000000000", $A_1286);
		bufTest( u128ToStr,700_000_000_000_000_000_000_000_000,"700000000000000000000000000", $A_1287);
		bufTest( u128ToStr,800_000_000_000_000_000_000_000_000,"800000000000000000000000000", $A_1288);
		bufTest( u128ToStr,900_000_000_000_000_000_000_000_000,"900000000000000000000000000", $A_1289);
		bufTest( u128ToStr,1_000_000_000_000_000_000_000_000_000,"1000000000000000000000000000", $B_1281);
		bufTest( u128ToStr,2_000_000_000_000_000_000_000_000_000,"2000000000000000000000000000", $B_1282);
		bufTest( u128ToStr,3_000_000_000_000_000_000_000_000_000,"3000000000000000000000000000", $B_1283);
		bufTest( u128ToStr,4_000_000_000_000_000_000_000_000_000,"4000000000000000000000000000", $B_1284);
		bufTest( u128ToStr,5_000_000_000_000_000_000_000_000_000,"5000000000000000000000000000", $B_1285);
		bufTest( u128ToStr,6_000_000_000_000_000_000_000_000_000,"6000000000000000000000000000", $B_1286);
		bufTest( u128ToStr,7_000_000_000_000_000_000_000_000_000,"7000000000000000000000000000", $B_1287);
		bufTest( u128ToStr,8_000_000_000_000_000_000_000_000_000,"8000000000000000000000000000", $B_1288);
		bufTest( u128ToStr,9_000_000_000_000_000_000_000_000_000,"9000000000000000000000000000", $B_1289);
		bufTest( u128ToStr,10_000_000_000_000_000_000_000_000_000,"10000000000000000000000000000", $C_1281);
		bufTest( u128ToStr,20_000_000_000_000_000_000_000_000_000,"20000000000000000000000000000", $C_1282);
		bufTest( u128ToStr,30_000_000_000_000_000_000_000_000_000,"30000000000000000000000000000", $C_1283);
		bufTest( u128ToStr,40_000_000_000_000_000_000_000_000_000,"40000000000000000000000000000", $C_1284);
		bufTest( u128ToStr,50_000_000_000_000_000_000_000_000_000,"50000000000000000000000000000", $C_1285);
		bufTest( u128ToStr,60_000_000_000_000_000_000_000_000_000,"60000000000000000000000000000", $C_1286);
		bufTest( u128ToStr,70_000_000_000_000_000_000_000_000_000,"70000000000000000000000000000", $C_1287);
		bufTest( u128ToStr,80_000_000_000_000_000_000_000_000_000,"80000000000000000000000000000", $C_1288);
		bufTest( u128ToStr,90_000_000_000_000_000_000_000_000_000,"90000000000000000000000000000", $C_1289);
		bufTest( u128ToStr,100_000_000_000_000_000_000_000_000_000,"100000000000000000000000000000", $D_1281);
		bufTest( u128ToStr,200_000_000_000_000_000_000_000_000_000,"200000000000000000000000000000", $D_1282);
		bufTest( u128ToStr,300_000_000_000_000_000_000_000_000_000,"300000000000000000000000000000", $D_1283);
		bufTest( u128ToStr,400_000_000_000_000_000_000_000_000_000,"400000000000000000000000000000", $D_1284);
		bufTest( u128ToStr,500_000_000_000_000_000_000_000_000_000,"500000000000000000000000000000", $D_1285);
		bufTest( u128ToStr,600_000_000_000_000_000_000_000_000_000,"600000000000000000000000000000", $D_1286);
		bufTest( u128ToStr,700_000_000_000_000_000_000_000_000_000,"700000000000000000000000000000", $D_1287);
		bufTest( u128ToStr,800_000_000_000_000_000_000_000_000_000,"800000000000000000000000000000", $D_1288);
		bufTest( u128ToStr,900_000_000_000_000_000_000_000_000_000,"900000000000000000000000000000", $D_1289);
		bufTest( u128ToStr,1_000_000_000_000_000_000_000_000_000_000,"1000000000000000000000000000000", $E_1281);
		bufTest( u128ToStr,2_000_000_000_000_000_000_000_000_000_000,"2000000000000000000000000000000", $E_1282);
		bufTest( u128ToStr,3_000_000_000_000_000_000_000_000_000_000,"3000000000000000000000000000000", $E_1283);
		bufTest( u128ToStr,4_000_000_000_000_000_000_000_000_000_000,"4000000000000000000000000000000", $E_1284);
		bufTest( u128ToStr,5_000_000_000_000_000_000_000_000_000_000,"5000000000000000000000000000000", $E_1285);
		bufTest( u128ToStr,6_000_000_000_000_000_000_000_000_000_000,"6000000000000000000000000000000", $E_1286);
		bufTest( u128ToStr,7_000_000_000_000_000_000_000_000_000_000,"7000000000000000000000000000000", $E_1287);
		bufTest( u128ToStr,8_000_000_000_000_000_000_000_000_000_000,"8000000000000000000000000000000", $E_1288);
		bufTest( u128ToStr,9_000_000_000_000_000_000_000_000_000_000,"9000000000000000000000000000000", $E_1289);
		bufTest( u128ToStr,10_000_000_000_000_000_000_000_000_000_000,"10000000000000000000000000000000", $F_1281);
		bufTest( u128ToStr,20_000_000_000_000_000_000_000_000_000_000,"20000000000000000000000000000000", $F_1282);
		bufTest( u128ToStr,30_000_000_000_000_000_000_000_000_000_000,"30000000000000000000000000000000", $F_1283);
		bufTest( u128ToStr,40_000_000_000_000_000_000_000_000_000_000,"40000000000000000000000000000000", $F_1284);
		bufTest( u128ToStr,50_000_000_000_000_000_000_000_000_000_000,"50000000000000000000000000000000", $F_1285);
		bufTest( u128ToStr,60_000_000_000_000_000_000_000_000_000_000,"60000000000000000000000000000000", $F_1286);
		bufTest( u128ToStr,70_000_000_000_000_000_000_000_000_000_000,"70000000000000000000000000000000", $F_1287);
		bufTest( u128ToStr,80_000_000_000_000_000_000_000_000_000_000,"80000000000000000000000000000000", $F_1288);
		bufTest( u128ToStr,90_000_000_000_000_000_000_000_000_000_000,"90000000000000000000000000000000", $F_1289);
		bufTest( u128ToStr,100_000_000_000_000_000_000_000_000_000_000,"100000000000000000000000000000000", $0_1281);
		bufTest( u128ToStr,200_000_000_000_000_000_000_000_000_000_000,"200000000000000000000000000000000", $0_1282);
		bufTest( u128ToStr,300_000_000_000_000_000_000_000_000_000_000,"300000000000000000000000000000000", $0_1283);
		bufTest( u128ToStr,400_000_000_000_000_000_000_000_000_000_000,"400000000000000000000000000000000", $0_1284);
		bufTest( u128ToStr,500_000_000_000_000_000_000_000_000_000_000,"500000000000000000000000000000000", $0_1285);
		bufTest( u128ToStr,600_000_000_000_000_000_000_000_000_000_000,"600000000000000000000000000000000", $0_1286);
		bufTest( u128ToStr,700_000_000_000_000_000_000_000_000_000_000,"700000000000000000000000000000000", $0_1287);
		bufTest( u128ToStr,800_000_000_000_000_000_000_000_000_000_000,"800000000000000000000000000000000", $0_1288);
		bufTest( u128ToStr,900_000_000_000_000_000_000_000_000_000_000,"900000000000000000000000000000000", $0_1289);
		bufTest( u128ToStr,1_000_000_000_000_000_000_000_000_000_000_000,"1000000000000000000000000000000000", $1_1281);
		bufTest( u128ToStr,2_000_000_000_000_000_000_000_000_000_000_000,"2000000000000000000000000000000000", $1_1282);
		bufTest( u128ToStr,3_000_000_000_000_000_000_000_000_000_000_000,"3000000000000000000000000000000000", $1_1283);
		bufTest( u128ToStr,4_000_000_000_000_000_000_000_000_000_000_000,"4000000000000000000000000000000000", $1_1284);
		bufTest( u128ToStr,5_000_000_000_000_000_000_000_000_000_000_000,"5000000000000000000000000000000000", $1_1285);
		bufTest( u128ToStr,6_000_000_000_000_000_000_000_000_000_000_000,"6000000000000000000000000000000000", $1_1286);
		bufTest( u128ToStr,7_000_000_000_000_000_000_000_000_000_000_000,"7000000000000000000000000000000000", $1_1287);
		bufTest( u128ToStr,8_000_000_000_000_000_000_000_000_000_000_000,"8000000000000000000000000000000000", $1_1288);
		bufTest( u128ToStr,9_000_000_000_000_000_000_000_000_000_000_000,"9000000000000000000000000000000000", $1_1289);
		bufTest( u128ToStr,10_000_000_000_000_000_000_000_000_000_000_000,"10000000000000000000000000000000000", $2_1281);
		bufTest( u128ToStr,20_000_000_000_000_000_000_000_000_000_000_000,"20000000000000000000000000000000000", $2_1282);
		bufTest( u128ToStr,30_000_000_000_000_000_000_000_000_000_000_000,"30000000000000000000000000000000000", $2_1283);
		bufTest( u128ToStr,40_000_000_000_000_000_000_000_000_000_000_000,"40000000000000000000000000000000000", $2_1284);
		bufTest( u128ToStr,50_000_000_000_000_000_000_000_000_000_000_000,"50000000000000000000000000000000000", $2_1285);
		bufTest( u128ToStr,60_000_000_000_000_000_000_000_000_000_000_000,"60000000000000000000000000000000000", $2_1286);
		bufTest( u128ToStr,70_000_000_000_000_000_000_000_000_000_000_000,"70000000000000000000000000000000000", $2_1287);
		bufTest( u128ToStr,80_000_000_000_000_000_000_000_000_000_000_000,"80000000000000000000000000000000000", $2_1288);
		bufTest( u128ToStr,90_000_000_000_000_000_000_000_000_000_000_000,"90000000000000000000000000000000000", $2_1289);
		bufTest( u128ToStr,100_000_000_000_000_000_000_000_000_000_000_000,"100000000000000000000000000000000000", $3_1281);
		bufTest( u128ToStr,200_000_000_000_000_000_000_000_000_000_000_000,"200000000000000000000000000000000000", $3_1282);
		bufTest( u128ToStr,300_000_000_000_000_000_000_000_000_000_000_000,"300000000000000000000000000000000000", $3_1283);
		bufTest( u128ToStr,400_000_000_000_000_000_000_000_000_000_000_000,"400000000000000000000000000000000000", $3_1284);
		bufTest( u128ToStr,500_000_000_000_000_000_000_000_000_000_000_000,"500000000000000000000000000000000000", $3_1285);
		bufTest( u128ToStr,600_000_000_000_000_000_000_000_000_000_000_000,"600000000000000000000000000000000000", $3_1286);
		bufTest( u128ToStr,700_000_000_000_000_000_000_000_000_000_000_000,"700000000000000000000000000000000000", $3_1287);
		bufTest( u128ToStr,800_000_000_000_000_000_000_000_000_000_000_000,"800000000000000000000000000000000000", $3_1288);
		bufTest( u128ToStr,900_000_000_000_000_000_000_000_000_000_000_000,"900000000000000000000000000000000000", $3_1289);
		bufTest( u128ToStr,1_000_000_000_000_000_000_000_000_000_000_000_000,"1000000000000000000000000000000000000", $4_1281);
		bufTest( u128ToStr,2_000_000_000_000_000_000_000_000_000_000_000_000,"2000000000000000000000000000000000000", $4_1282);
		bufTest( u128ToStr,3_000_000_000_000_000_000_000_000_000_000_000_000,"3000000000000000000000000000000000000", $4_1283);
		bufTest( u128ToStr,4_000_000_000_000_000_000_000_000_000_000_000_000,"4000000000000000000000000000000000000", $4_1284);
		bufTest( u128ToStr,5_000_000_000_000_000_000_000_000_000_000_000_000,"5000000000000000000000000000000000000", $4_1285);
		bufTest( u128ToStr,6_000_000_000_000_000_000_000_000_000_000_000_000,"6000000000000000000000000000000000000", $4_1286);
		bufTest( u128ToStr,7_000_000_000_000_000_000_000_000_000_000_000_000,"7000000000000000000000000000000000000", $4_1287);
		bufTest( u128ToStr,8_000_000_000_000_000_000_000_000_000_000_000_000,"8000000000000000000000000000000000000", $4_1288);
		bufTest( u128ToStr,9_000_000_000_000_000_000_000_000_000_000_000_000,"9000000000000000000000000000000000000", $4_1289);
		bufTest( u128ToStr,10_000_000_000_000_000_000_000_000_000_000_000_000,"10000000000000000000000000000000000000", $5_1281);
		bufTest( u128ToStr,20_000_000_000_000_000_000_000_000_000_000_000_000,"20000000000000000000000000000000000000", $5_1282);
		bufTest( u128ToStr,30_000_000_000_000_000_000_000_000_000_000_000_000,"30000000000000000000000000000000000000", $5_1283);
		bufTest( u128ToStr,40_000_000_000_000_000_000_000_000_000_000_000_000,"40000000000000000000000000000000000000", $5_1284);
		bufTest( u128ToStr,50_000_000_000_000_000_000_000_000_000_000_000_000,"50000000000000000000000000000000000000", $5_1285);
		bufTest( u128ToStr,60_000_000_000_000_000_000_000_000_000_000_000_000,"60000000000000000000000000000000000000", $5_1286);
		bufTest( u128ToStr,70_000_000_000_000_000_000_000_000_000_000_000_000,"70000000000000000000000000000000000000", $5_1287);
		bufTest( u128ToStr,80_000_000_000_000_000_000_000_000_000_000_000_000,"80000000000000000000000000000000000000", $5_1288);
		bufTest( u128ToStr,90_000_000_000_000_000_000_000_000_000_000_000_000,"90000000000000000000000000000000000000", $5_1289);
		bufTest( u128ToStr,100_000_000_000_000_000_000_000_000_000_000_000_000,"100000000000000000000000000000000000000", $6_1281);

		
		readonly
			i128Test_a	:string[64] :=
						[
							#for( i := 0 to 62 )
							
								mkStr( "0", ' ', i ),
								
							#endfor
							mkStr( "0", ' ', 63 )
						];
						
			i128Test_b	:string[64] :=
						[
							#for( i := 0 to 62 )
							
								mkStr2( "127", '.', i ),
								
							#endfor
							mkStr2( "127", '.', 63 )
						];
						
		endreadonly;
		strTest( u128ToStr, 0, i128Test_a, $a0F0A0, 63, ' ' );				
		strTest2( u128ToStr, 127, i128Test_b, $a0F0A1, 63, '.' );				

		stderr.put( "conv.u128ToStr succeeded!" nl );
		
	  anyexception
	  
		stderr.put
		( 
			nl nl 
			"***************************************************" nl
			"conv.u128ToStr failed! eax=", eax, nl
			"***************************************************" nl
			nl 
		);
		stdout.put( "Press Enter to Continue: " );
		stdin.readLn();
		os.exitProcess(1);
		
	endtry;



end convutostr_test;

													